<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Clyst</title>
    <style>
    /* ...existing CSS unchanged... */
    :root{
      --nav-pad-y: 10px;
      --nav-pad-x: 20px;
      --gap: 20px;
      --accent: #111;
      --muted: #555;
      --bg: #f5f5f5;
      --card: #fff;
    }
    body{ font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; background: var(--bg); margin: 0; }
    nav#topNav{ position: sticky; top:0; z-index:1000; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,.05); padding: var(--nav-pad-y) var(--nav-pad-x); display: grid; grid-template-columns: auto 1fr auto auto; align-items:center; column-gap: var(--gap);}
    .nav-left{ display:flex; align-items:center; gap:10px; font-weight:700; font-size:20px; color:var(--accent);}
    .hamburger{ display:none; flex-direction:column; gap:5px; cursor:pointer; }
    .hamburger span{ width:24px; height:2px; background:var(--accent); border-radius:2px; display:block; }
    .nav-center{ grid-column:2; justify-self:center; display:flex; gap:40px;}
    .nav-center a{ text-decoration:none; color:#555; font-size:16px; padding-bottom:3px; transition:color .2s, border-bottom-color .2s; border-bottom:2px solid transparent;}
    .nav-center a:hover{ color:#000; }
    .nav-center a.active{ color:#000; font-weight:600; border-bottom-color:#111; }
    .search-box{ display:none; }
    .nav-actions{ grid-column:4; justify-self:end; display:flex; align-items:center; gap:12px; }
    .search-icon{ width:38px; height:38px; border-radius:50%; background:#f0f0f0; display:flex; justify-content:center; align-items:center; cursor:pointer; transition:background .3s;}
    .search-icon:hover{ background:#ddd; }
    .search-icon svg{ width:18px; height:18px; fill:#111; }
    .profile-btn{ width:38px; height:38px; border-radius:50%; background:#111; color:#fff; display:flex; justify-content:center; align-items:center; cursor:pointer; transition:background .2s;}
    .profile-btn:hover{ background:#333; }
    .profile-btn svg{ width:20px; height:20px; fill:#fff; }
    .search-below{ display:none; justify-content:center; align-items:center; background:#fff; border-bottom:1px solid #e9e9e9; padding:12px var(--nav-pad-x); z-index: 900;}
    .search-below.open{ display:flex; animation: slideDown .25s ease;background: none; border: none;}
    .search-pill{ width: min(720px, 92vw); background:#ffffff; border-radius: 28px; padding: 6px 10px 6px 14px; display:flex; align-items:center; gap:10px; box-shadow: 0 6px 18px rgba(0,0,0,.08); border:1px solid #e6e6e6;}
    .search-pill input{ flex:1; border:none; background:transparent; padding:10px 4px; font-size:15px; outline:none;}
    .search-close{ width:34px; height:34px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; color:#444; transition: background .2s;}
    .search-close:hover{ background:#e1e1e1; }
    @keyframes slideDown{ from{ transform: translateY(-8px); opacity: 0; } to{ transform: translateY(0); opacity: 1; } }
    .mobile-menu{ display:none; flex-direction:column; background:#fff; padding:10px var(--nav-pad-x); box-shadow:0 2px 6px rgba(0,0,0,.05);}
    .mobile-menu a{ text-decoration:none; color:#333; padding:10px 0; font-size:15px; border-bottom:1px dashed #eee;}
    .mobile-menu a:last-child{ border-bottom:none; }
    .mobile-menu a.active{ font-weight:600; color:#000; }
    .post{ display:flex; justify-content:space-between; align-items:flex-start; gap:30px; padding:30px; margin:40px auto; max-width:1000px; background:var(--card); border-radius:14px; border:1px solid #eee; box-shadow:0 4px 12px rgba(0,0,0,.08); transition:transform .3s, box-shadow .3s;}
    .post:hover{ transform:translateY(-4px); box-shadow:0 6px 18px rgba(0,0,0,.12); }
    .post-info{ flex:1; max-width:360px; }
    .post-header{ display:flex; gap:10px; font-family:monospace; font-size:13px; margin-bottom:10px; color:#555; }
    .item-title{ font-size:22px; font-weight:600; margin:6px 0 14px; }
    .item-desc{ font-size:15px; line-height:1.5; color:#444; margin-bottom:16px; }
    .post-image{ flex:1; display:flex; justify-content:flex-end; }
    .post-image img{ width:100%; max-width:420px; aspect-ratio:3/4; object-fit:cover; border-radius:10px; border:1px solid #ddd; }
    .fab{ position:fixed; bottom:60px; right:40px; width:55px; height:55px; border-radius:50%; text-decoration: none; background:#111; color:#fff; font-size:28px; display:flex; justify-content:center; align-items:center; box-shadow:0 4px 10px rgba(0,0,0,.2); cursor:pointer; transition:background .2s, transform .2s; z-index:200;}
    .fab:hover{ background:#333; transform:scale(1.1); }
    .bottom-nav{ display:none; position:fixed; bottom:0; left:0; width:100%; background:#fff; box-shadow:0 -2px 6px rgba(0,0,0,.1); justify-content:space-around; align-items:center; padding:6px 0; z-index:300;}
    .bottom-nav button{ background:none; border:none; cursor:pointer; font-size:20px; display:flex; justify-content:center; align-items:center;}
    .bottom-nav .plus-btn{ width:45px; height:45px; border-radius:50%; background:#111; color:#fff; font-size:24px; display:flex; justify-content:center; align-items:center; box-shadow:0 3px 8px rgba(0,0,0,.2); margin:0 10px;}
    @media (max-width: 768px){
      nav#topNav{ grid-template-columns: auto 1fr auto; column-gap: 12px;}
      .hamburger{ display:flex; }
      .nav-center{ display:none; }
      .post{ flex-direction:column; padding:20px; margin:20px auto; }
      .post-info{ max-width:100%; }
      .post-image{ justify-content:center; }
      .fab{ display:none; }
      .bottom-nav{ display:flex; }
      .search-pill{ width: calc(100vw - 32px); }
    }
  </style>
  </head>
  <body>
      <!-- ===== NAVBAR ===== -->
  <nav id="topNav">
    <div class="nav-left">
      <div class="hamburger" onclick="toggleMenu(event)">
        <span></span><span></span><span></span>
      </div>
      <a href="/" style="text-decoration:none; color:inherit;">Clyst</a>
    </div>

    <div class="nav-center" id="navLinks">
      <a href="/">Community Feed</a>
      <a href="/products">Your Products</a>
      <a href="/products">Marketplace</a>
    </div>

    <div class="search-box" id="searchBox">
      <input type="text" placeholder="Search..." />
    </div>

    <div class="nav-actions">
      <div class="search-icon" onclick="toggleSearch()" aria-label="Open search" title="Search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M21 20l-5.8-5.8a7 7 0 10-1.2 1.2L20 21l1-1zM5 10a5 5 0 1110 0 5 5 0 01-10 0z"/>
        </svg>
      </div>
      <!-- ...existing code... -->
      <a href="/profile" class="profile-btn" title="Profile">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"/>
        </svg>
      </a>
<!-- ...existing code... -->
    </div>
  </nav>

  <!-- ===== SEARCH BELOW NAV ===== -->
  <div id="searchBelow" class="search-below">
    <div class="search-pill">
      <input id="globalSearchInput" type="text" placeholder="Search..." />
      <div class="search-close" onclick="toggleSearch()">✕</div>
    </div>
  </div>

  <div class="mobile-menu" id="mobileMenu">
    <a href="/">Community Feed</a>
    <a href="/products">Your Products</a>
    <a href="/products">Marketplace</a>
  </div>

  <div class="post">
    <div class="post-info">      
      <a href="{{url_for('delete_products', id=product.id)}}">Delete</a>

      <div class="post-header">{{product.artist.name}} ✔ ({{product.created_at}})</div>
      <div class="item-title">{{product.title}}</div>
      <div class="item-desc">{{product.description}}</div>
      <p><strong>Posted By:</strong> {{product.artist.name}}</p>
      <p style="font-weight:600; color:#111; margin-bottom:10px;">₹{{product.price}}</p>
      <p><strong>Year:</strong> {{product.created_at}}</p>
      <a href="/purchase" style="padding:8px 18px; text-decoration: none; border:none; border-radius:6px; background:#111; color:#fff; cursor:pointer;">Purchase</a>
      <a href="{{url_for('profile', id=product.artist.id)}}" style="padding:8px 18px; text-decoration: none; border:none; border-radius:6px; background:#111; color:#fff; cursor:pointer;">View Artisan</a>
    </div>
    {% if product.img_url %}
    <div class="post-image">
      <img src="https://images.unsplash.com/photo-1719696260749-2e3e5a18ef6f?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1yZWxhdGVkfDY0fHx8ZW58MHx8fHx8 " alt="{{product.title}}">
    </div>
    {% endif %}
  </div>

  <script>
    function toggleMenu(e){
      e?.stopPropagation?.();
      const menu = document.getElementById("mobileMenu");
      const now = menu.style.display === "flex" ? "none" : "flex";
      menu.style.display = now;
      if(now === "flex") document.getElementById("searchBelow").classList.remove("open");
    }

    function toggleSearch(){
      const bar = document.getElementById("searchBelow");
      bar.classList.toggle("open");
      const menu = document.getElementById("mobileMenu");
      if(menu.style.display === "flex") menu.style.display = "none";
      if(bar.classList.contains("open")){
        requestAnimationFrame(()=> document.getElementById("globalSearchInput").focus());
      }
    }
  </script>
  <script>
  function toggleMenu(e){
    e?.stopPropagation?.();
    const menu = document.getElementById("mobileMenu");
    const now = menu.style.display === "flex" ? "none" : "flex";
    menu.style.display = now;
    if(now === "flex") document.getElementById("searchBelow").classList.remove("open");
  }

  function toggleSearch(){
    const bar = document.getElementById("searchBelow");
    bar.classList.toggle("open");
    const menu = document.getElementById("mobileMenu");
    if(menu.style.display === "flex") menu.style.display = "none";
    if(bar.classList.contains("open")){
      requestAnimationFrame(()=> document.getElementById("globalSearchInput").focus());
    }
  }

  // Highlight active nav link
  document.addEventListener("DOMContentLoaded", function() {
    const path = window.location.pathname.split('/').pop();
    document.querySelectorAll('.nav-center a, .mobile-menu a').forEach(link => {
      if (link.getAttribute('href') === path) {
        link.classList.add('active');
      } else {
        link.classList.remove('active');
      }
    });
  });
</script>
  </body>
</html>