<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Clyst</title>
    <style>
    :root{
      --nav-pad-y: 10px;
      --nav-pad-x: 20px;
      --gap: 20px;
      --accent: #111;
      --muted: #555;
      --bg: #f5f5f5;
      --card: #fff;
    }

    body{
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      background: var(--bg);
      margin: 0;
    }

    /* ===== NAVBAR ===== */
    nav#topNav{
      position: sticky; top:0; z-index:1000;
      background:#fff;
      box-shadow:0 2px 6px rgba(0,0,0,.05);
      padding: var(--nav-pad-y) var(--nav-pad-x);
      display: grid;
      grid-template-columns: auto 1fr auto auto; 
      align-items:center;
      column-gap: var(--gap);
    }

    .nav-left{
      display:flex; align-items:center; gap:10px;
      font-weight:700; font-size:20px; color:var(--accent);
    }

    .hamburger{ display:none; flex-direction:column; gap:5px; cursor:pointer; }
    .hamburger span{ width:24px; height:2px; background:var(--accent); border-radius:2px; display:block; }

    .nav-center{
      grid-column:2;
      justify-self:center;
      display:flex; gap:40px;
    }

    .nav-center a{
      text-decoration:none; color:#555; font-size:16px;
      padding-bottom:3px; transition:color .2s, border-bottom-color .2s;
      border-bottom:2px solid transparent;
    }
    .nav-center a:hover{ color:#000; }
    .nav-center a.active{ color:#000; font-weight:600; border-bottom-color:#111; }

    .search-box{ display:none; }

    .nav-actions{ grid-column:4; justify-self:end; display:flex; align-items:center; gap:12px; }

    .search-icon{
      width:38px; height:38px; border-radius:50%; background:#f0f0f0;
      display:flex; justify-content:center; align-items:center;
      cursor:pointer; transition:background .3s;
    }
    .search-icon:hover{ background:#ddd; }
    .search-icon svg{ width:18px; height:18px; fill:#111; }

    .profile-btn{
      width:38px; height:38px; border-radius:50%; background:#111; color:#fff;
      display:flex; justify-content:center; align-items:center; cursor:pointer; transition:background .2s;
    }
    .profile-btn:hover{ background:#333; }
    .profile-btn svg{ width:20px; height:20px; fill:#fff; }

    /* ===== Search bar BELOW the navbar ===== */
    .search-below{
      display:none;
      justify-content:center;
      align-items:center;
      background:#fff;
      border-bottom:1px solid #e9e9e9;
      padding:12px var(--nav-pad-x);
      z-index: 900;
    }
    .search-below.open{
      display:flex;
      animation: slideDown .25s ease;
      background : none;
      border : none;
    }
    .search-pill{
      width: min(720px, 92vw);
      background:#ffffff;
      border-radius: 28px;
      padding: 6px 10px 6px 14px;
      display:flex; align-items:center; gap:10px;
      box-shadow: 0 6px 18px rgba(0,0,0,.08);
      border:1px solid #e6e6e6;
    }
    .search-pill input{
      flex:1; border:none; background:transparent;
      padding:10px 4px; font-size:15px; outline:none;
    }
    .search-close{
      width:34px; height:34px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      cursor:pointer; color:#444; transition: background .2s;
    }
    .search-close:hover{ background:#e1e1e1; }

    @keyframes slideDown{
      from{ transform: translateY(-8px); opacity: 0; }
      to{ transform: translateY(0); opacity: 1; }
    }

    .mobile-menu{
      display:none; flex-direction:column; background:#fff;
      padding:10px var(--nav-pad-x); box-shadow:0 2px 6px rgba(0,0,0,.05);
    }
    .mobile-menu a{
      text-decoration:none; color:#333; padding:10px 0; font-size:15px;
      border-bottom:1px dashed #eee;
    }
    .mobile-menu a:last-child{ border-bottom:none; }
    .mobile-menu a.active{ font-weight:600; color:#000; }

    @media (max-width: 768px){
      nav#topNav{
        grid-template-columns: auto 1fr auto;
        column-gap: 12px;
      }
      .hamburger{ display:flex; }
      .nav-center{ display:none; }
      .search-pill{ width: calc(100vw - 32px); }
    }
  </style>
  </head>
  <body>

    <!-- ===== NAVBAR ===== -->
  <nav id="topNav">
    <div class="nav-left">
      <div class="hamburger" onclick="toggleMenu(event)">
        <span></span><span></span><span></span>
      </div>
      <a href="/" style="text-decoration:none; color:inherit;">Clyst</a>
    </div>

    <div class="nav-center" id="navLinks">
      <a href="/">Community Feed</a>
      <a href="/products">Your Products</a>
      <a href="/products">Marketplace</a>
    </div>

    <div class="search-box" id="searchBox">
      <input type="text" placeholder="Search..." />
    </div>

    <div class="nav-actions">
      <div class="search-icon" onclick="toggleSearch()" aria-label="Open search" title="Search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M21 20l-5.8-5.8a7 7 0 10-1.2 1.2L20 21l1-1zM5 10a5 5 0 1110 0 5 5 0 01-10 0z"/>
        </svg>
      </div>
      <!-- ...existing code... -->
      <a href="/profile" class="profile-btn" title="Profile">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"/>
        </svg>
      </a>
<!-- ...existing code... -->
    </div>
  </nav>

  <!-- ===== SEARCH BELOW NAV ===== -->
  <div id="searchBelow" class="search-below">
    <div class="search-pill">
      <input id="globalSearchInput" type="text" placeholder="Search..." />
      <div class="search-close" onclick="toggleSearch()">✕</div>
    </div>
  </div>

  <div class="mobile-menu" id="mobileMenu">
    <a href="/">Community Feed</a>
    <a href="/products">Your Products</a>
    <a href="/products">Marketplace</a>
  </div>

<!-- ===== PRODUCT LISTING SECTION ===== -->
<div style="max-width:1000px; margin:40px auto;">
  <h2 style="font-size:2rem; margin-bottom:24px; color:#111;">Marketplace</h2>
  <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:28px;">
    <!-- Product Card 1 -->
    <div style="background:#fff; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.07); border:1px solid #eee; padding:20px; display:flex; flex-direction:column; align-items:center;">
      <img src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80" alt="Product 1" style="width:100%; max-width:180px; border-radius:8px; margin-bottom:16px;">
      <h3 style="margin:0 0 10px; font-size:1.2rem; color:#222;">{{product.title}}</h3>
      <p style="color:#555; font-size:15px; margin-bottom:12px; text-align:center;">{{product.description}}</p>
      <p style="font-weight:600; color:#111; margin-bottom:10px;">₹{{product.price}}</p>
      <a href="{{url_for('product_buy', id=product.id)}}" style="padding:8px 18px; text-decoration: none; border:none; border-radius:6px; background:#111; color:#fff; cursor:pointer;">Buy Now</a>
      <a href="{{url_for('profile', id=product.artist.id)}}" style="padding:8px 18px; text-decoration: none; border:none; border-radius:6px; background:#111; color:#fff; cursor:pointer;">View Artisan</a>
    </div>
  </div>
</div>

<script>
    function toggleMenu(e){
      e?.stopPropagation?.();
      const menu = document.getElementById("mobileMenu");
      const now = menu.style.display === "flex" ? "none" : "flex";
      menu.style.display = now;
      if(now === "flex") document.getElementById("searchBelow").classList.remove("open");
    }

    function toggleSearch(){
      const bar = document.getElementById("searchBelow");
      bar.classList.toggle("open");
      const menu = document.getElementById("mobileMenu");
      if(menu.style.display === "flex") menu.style.display = "none";
      if(bar.classList.contains("open")){
        requestAnimationFrame(()=> document.getElementById("globalSearchInput").focus());
      }
    }
  </script>
  <script>
  function toggleMenu(e){
    e?.stopPropagation?.();
    const menu = document.getElementById("mobileMenu");
    const now = menu.style.display === "flex" ? "none" : "flex";
    menu.style.display = now;
    if(now === "flex") document.getElementById("searchBelow").classList.remove("open");
  }

  function toggleSearch(){
    const bar = document.getElementById("searchBelow");
    bar.classList.toggle("open");
    const menu = document.getElementById("mobileMenu");
    if(menu.style.display === "flex") menu.style.display = "none";
    if(bar.classList.contains("open")){
      requestAnimationFrame(()=> document.getElementById("globalSearchInput").focus());
    }
  }

  // Highlight active nav link
  document.addEventListener("DOMContentLoaded", function() {
    const path = window.location.pathname.split('/').pop();
    document.querySelectorAll('.nav-center a, .mobile-menu a').forEach(link => {
      if (link.getAttribute('href') === path) {
        link.classList.add('active');
      } else {
        link.classList.remove('active');
      }
    });
  });
</script>
  </body>
</html>